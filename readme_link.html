<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Edge Evaluation Tools &mdash; pyEdgeEval 0.0.5 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="pyEdgeEval package" href="pyEdgeEval.html" />
    <link rel="prev" title="Welcome to pyEdgeEval’s documentation!" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> pyEdgeEval
          </a>
              <div class="version">
                0.0.5
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Edge Evaluation Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="#installation">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#dependencies">Dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="#installation-guide">Installation guide</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#evaluation-for-each-datasets">Evaluation for each datasets</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#bsds500">BSDS500</a></li>
<li class="toctree-l2"><a class="reference internal" href="#sbd">SBD</a></li>
<li class="toctree-l2"><a class="reference internal" href="#cityscapes">CityScapes</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#acknowledgements">Acknowledgements</a></li>
<li class="toctree-l1"><a class="reference internal" href="pyEdgeEval.html">pyEdgeEval package</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">pyEdgeEval</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Edge Evaluation Tools</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/readme_link.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="edge-evaluation-tools">
<h1>Edge Evaluation Tools<a class="headerlink" href="#edge-evaluation-tools" title="Permalink to this heading">¶</a></h1>
<p>Edge detection tasks heavily relies on the original codes used in BSDS300/500 written in <a class="reference external" href="https://www2.eecs.berkeley.edu/Research/Projects/CS/vision/grouping/resources.html">MATLAB and C++</a>.
In the field of computer vision, various edge detection algorithms are now resorting to Python and the various machine learning libraries.
However, due to the fact that not everyone has access to MATLAB and that the original benchmark codes are outdated, evaluating these algorithms, especially on remote servers (docker containers), has been difficult.
This library aims to remove these limitations and make it easy for models to be evaluated and benchmarked without the need of MATLAB.
The original C++ codes used in the MATLAB benchmarks are ported with Cython and the evaluation scripts are rewritten in Python.
The codebase is created to be extensible and supports various tasks and datasets as well as different evaluation protocols.
To test the validity of the evaluation code, <code class="docutils literal notranslate"><span class="pre">pyEdgeEval</span></code>’s results are compared with the results of the original MATLAB codes.</p>
<p><code class="docutils literal notranslate"><span class="pre">pyEdgeEval</span></code> is:</p>
<ul class="simple">
<li><p>an alternative to the original MATLAB benchmark</p></li>
<li><p>light with minimal dependencies</p></li>
<li><p>modular and easily customizable</p></li>
<li><p>fast (uses multiprocessing and Cython)</p></li>
<li><p>implements common preprocessing algorithms</p></li>
<li><p>supports various tasks and datasets</p></li>
<li><p>supports various evaluation protocols</p></li>
<li><p>edge generation tools</p></li>
<li><p>etc…</p></li>
</ul>
<p>Supported tasks:</p>
<ul class="simple">
<li><p>Edge Detection</p></li>
<li><p>Semantic Boundary Detection</p></li>
</ul>
<p>Supported datasets:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://www2.eecs.berkeley.edu/Research/Projects/CS/vision/grouping/resources.html">BSDS500</a></p></li>
<li><p><a class="reference external" href="http://home.bharathh.info/pubs/codes/SBD/download.html">SBD</a></p></li>
<li><p><a class="reference external" href="https://www.cityscapes-dataset.com">Cityscapes</a></p></li>
</ul>
<p>Disclaimers:</p>
<ul class="simple">
<li><p>The evaluation code does not output results that exactly match the original MATLAB benchmark. This could be for various reasons. The results are, for the most part, close enough. I recommend NOT to compare the results from this evaluation directly with results obtained through the MATLAB code for this reason.</p></li>
<li><p>The codes and algorithms are not perfect. I will not take responsibility for how the code is used. If there are some bugs or improvements, please submit issues or pull requests.</p></li>
</ul>
</section>
<section id="installation">
<h1>Installation<a class="headerlink" href="#installation" title="Permalink to this heading">¶</a></h1>
<section id="dependencies">
<h2>Dependencies<a class="headerlink" href="#dependencies" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">&gt;=</span> <span class="pre">3.8</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cv2</span></code></p></li>
</ul>
</section>
<section id="installation-guide">
<h2>Installation guide<a class="headerlink" href="#installation-guide" title="Permalink to this heading">¶</a></h2>
<div class="highlight-Bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Install dependencies</span>
pip install -r requirements.txt

<span class="c1"># install cv2 (e.g. use pip)</span>
pip install opencv-python

<span class="c1"># Option 1. install without cloning the project (only tested on ubuntu with python 3.8)</span>
pip install pyEdgeEval

<span class="c1"># Option 2. install as a pip package (install as a package)</span>
git clone https://github.com/haruishi43/py-edge-eval.git
pip install -e .
</pre></div>
</div>
</section>
</section>
<section id="evaluation-for-each-datasets">
<h1>Evaluation for each datasets<a class="headerlink" href="#evaluation-for-each-datasets" title="Permalink to this heading">¶</a></h1>
<section id="bsds500">
<h2>BSDS500<a class="headerlink" href="#bsds500" title="Permalink to this heading">¶</a></h2>
<p>Script:</p>
<div class="highlight-Bash notranslate"><div class="highlight"><pre><span></span>python scripts/evaluate_bsds500.py &lt;path/to/bsds500&gt; &lt;path/to/pred&gt; &lt;path/to/output&gt; --thresholds<span class="o">=</span><span class="m">5</span> --nproc<span class="o">=</span><span class="m">8</span>
</pre></div>
</div>
<p>Tested with <a class="reference external" href="https://github.com/xwjabc/hed">&#64;xwjabc’s HED implementation</a>.
Setting <code class="docutils literal notranslate"><span class="pre">--nproc</span></code> will drastically improve the evaluation.
However, due to the randomness in the original MATLAB (C++) codebase, the results will be different (at most +-0.001 difference).</p>
</section>
<section id="sbd">
<h2>SBD<a class="headerlink" href="#sbd" title="Permalink to this heading">¶</a></h2>
<p>Script:</p>
<div class="highlight-Bash notranslate"><div class="highlight"><pre><span></span>python scripts/evaluate_sbd.py &lt;path/to/sbd&gt; &lt;path/to/pred&gt; &lt;path/to/output&gt; --categories<span class="o">=</span><span class="m">15</span> --thresholds<span class="o">=</span><span class="m">5</span> --nproc<span class="o">=</span><span class="m">8</span>
</pre></div>
</div>
</section>
<section id="cityscapes">
<h2>CityScapes<a class="headerlink" href="#cityscapes" title="Permalink to this heading">¶</a></h2>
<p>First, create GT data using this script:</p>
<div class="highlight-Bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># if you plan on evaluating with instance-sensitive edges (IS edges)</span>
python scripts/convert_dataset/cityscapes.py --nproc <span class="m">8</span>
<span class="c1"># if you plan on evaluating with instance-insensitive edges</span>
python scripts/convert_dataset/cityscapes.py --insensitive --nproc <span class="m">8</span>
</pre></div>
</div>
<p>Evaluation script:</p>
<div class="highlight-Bash notranslate"><div class="highlight"><pre><span></span>python scripts/evaluate_cityscapes.py &lt;path/to/cityscapes&gt; &lt;path/to/predictions&gt; &lt;path/to/output&gt; --categories<span class="o">=</span><span class="s1">&#39;[1, 14]&#39;</span> --thresholds <span class="m">99</span> --nproc <span class="m">8</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">--thin</span></code> will enable thinning on predictions and use thinned GTs.
For instance-insensitive edges, you would need to supply <code class="docutils literal notranslate"><span class="pre">--pre-seal</span></code> argument.</p>
</section>
</section>
<section id="acknowledgements">
<h1>Acknowledgements<a class="headerlink" href="#acknowledgements" title="Permalink to this heading">¶</a></h1>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pdollar/edges">edges</a></p>
<ul>
<li><p>tools for processing edges (written in MATLAB and C++)</p></li>
</ul>
</li>
<li><p><a class="reference external" href="https://github.com/Chrisding/seal/blob/master/LICENSE">seal</a></p>
<ul>
<li><p>semantic boundary detection protocols</p></li>
</ul>
</li>
<li><p><a class="reference external" href="https://github.com/Walstruzz/edge_eval_python">edge_eval_python</a>:</p>
<ul>
<li><p>referenced implementation for <code class="docutils literal notranslate"><span class="pre">bwmorph</span></code> thinning algorithm and <code class="docutils literal notranslate"><span class="pre">nms</span></code> preprocessing</p></li>
<li><p>referenced PR-curve visualization codes</p></li>
</ul>
</li>
<li><p><a class="reference external" href="https://github.com/Britefury/py-bsds500">py-bsds500</a></p>
<ul>
<li><p>referenced Cython ports for <code class="docutils literal notranslate"><span class="pre">correspond_pixels</span></code> used in the original MATLAB code</p></li>
<li><p>referenced python version of the evaluation script for BSDS500</p></li>
</ul>
</li>
</ul>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="Welcome to pyEdgeEval’s documentation!" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="pyEdgeEval.html" class="btn btn-neutral float-right" title="pyEdgeEval package" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, haruishi43.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>